# SINTRAN III Monitor Call: GetAllFileIndexes
# Octal: 217B
# Extracted from: Monitor Calls.md (ND-860228.2 EN)

octal: 217B
name: GetAllFileIndexes
short_names: []
description: Gets the directory index, the user index, and the object index of a file.
  These are indexes in the SINTRAN III File System. Appendix C describes the File
  System.
notes:
- The file must be open.
- You may get the information if the file is on your local computer, or on a remote
  computer system if the computers are connected through a COSMOS network.
see_also:
- GetDirUserIndexes
- GetDirNameIndex
- GetFileIndexes
- GetDirEntry
- GetUserEntry
- GetObjectEntry
- and GetDefaultDir
references: []
parameters:
- name: Filenumber
  type: See Openfile.
  io: I
  description: ''
- name: Directoryindex
  type: The directory index.
  io: I
  description: ''
- name: Userindex
  type: The user index.
  io: I
  description: ''
- name: Objectindex
  type: The object index.
  io: I
  description: ''
- name: Remoteflag
  type: Set to 0 if the file is on the local computer. A file on a remote computer
    returns 1.
  io: I
  description: ''
- name: Remotesystemidentification
  type: If the remote flag is set to 1. It includes information needed to log in,
    and is terminated by an apostrophe, e.g. SNURRE(P-HANSEN[&&&&&])'. The password,
    if present, is coded as a sequence of 6 control characters.
  io: I
  description: ''
- name: StandardErrorCode
  type: See appendix A.
  io: I
  description: ''
examples:
  pascal:
    available: true
    code: 'FileNo, DirIndex, UserIndex, ObjectIndex : INTEGER2;

      ...

      GetAllFileIndexes(FileNo, DirIndex, UserIndex, ObjectIndex);

      IF ErrCode <> 0 THEN ...'
    notes: ''
  cobol:
    available: true
    code: "01 FileNo COMP.\n01 DirIndex COMP.\n01 UserIndex COMP.\n01 ObjectIndex\
      \ COMP.\n01 RemoteFlag COMP.\n01 RemoteSystem PIC X(64).\n01 ErrCode COMP.\n\
      ...\nMONITOR-CALL \"GetAllFileIndexes\" USING FileNo, DirIndex, UserIndex,\n\
      \  ObjectIndex, RemoteFlag, RemoteSystem.\nCALL \"CbError\" USING ErrCode.\n\
      IF ErrCode NOT = 0 GO ..."
    notes: ''
  fortran:
    available: true
    code: "INTEGER FileNo, DirIndex, UserIndex, ObjectIndex, RemoteFlag\nCHARACTER\
      \ RemoteSystem*64\n...\nMonitor_Call('GetAllFileIndexes', FileNo, DirIndex,\
      \ UserIndex,\n  ObjectIndex, RemoteFlag, RemoteSystem(1:64))\nIF (ErrCode .NE.\
      \ 0) THEN ...\n\n\nScanned by Jonny Oddene for Sintran Data Â© 2020"
    notes: ''
  planc:
    available: true
    code: 'INTEGER : FileNo, DirIndex, UserIndex, ObjectIndex, RemoteFlag

      BYTES : RemoteSystem(0:63)

      ...

      ON ROUTINEERROR DO

      &emsp;IF ErrCode >< 0 THEN ...

      ENDON


      Monitor_Call(''GetAllFileIndexes'', FileNo, DirIndex, UserIndex, ObjectIndex,&

      &emsp;&emsp;RemoteFlag, RemoteSystem)'
    notes: ''
  assembly_500:
    available: true
    code: '| Variable      | Width | Description |

      |---------------|-------|-------------|

      | FileNo        | W BLOCK 1 | |

      | DirIndex      | W BLOCK 1 | %If bit 7 is set, SysId is a 5th parameter. |

      | UserIndex     | W BLOCK 1 | |

      | ObjectIndex   | W BLOCK 1 | |

      | SysId         | STRING 16 | %Remote system name as an optional 5th parameter.
      |

      | ErrCode       | W BLOCK 1 | |


      GetAllFileIndexes : EQU 37B9 + 217B

      ...

      CALLG GetAllFileIndexes, 4, FileNo, DirIndex, UserIndex, ObjectIndex

      % This call is for a local file. For a remote file, the

      % format would be:

      % CALLG GetAllFileIndexes, 5, FN, DI, UI, OI, SysID

      IF K GO ERROR

      ...


      ERROR : WI =: ErrCode %ErrorCode in W1 register.'
    octal_definition: 37B9 + 217B
    notes: ''
  mac:
    available: true
    code: 'LDA (BUFF %Buffer in which to return remote system

      COPY SA DD % identification

      LDA FILNO %File number returned from earlier OpenFile.

      MON 217 %Monitor call GetAllFileIndexes.

      JMP ERROR %Error return from monitor call.

      STT INDEX %Normal return, store directory and user index.

      STX OBJIX %Store object index.

      COPY SD DA %Remote identification in D register if bit 15

      STA REMID % in T register is set.

      ...

      ERROR, ... %Error number in register A.

      ...

      FILNO, ...

      INDEX, 0 %Dir index: left byte. User index: right byte.

      OBJIX, 0 %Object index.

      REMID, 0 %Address of remote identification string.

      BUFF, 0

      *+40/



      | ND-100 and ND-500 | All users | All programs |'
    mon_number: 217
    notes: ''
compatibility:
  platforms:
    nd100: true
    nd500: true
  users:
  - All users
  programs:
  - All programs
  notes: ''
errors:
  returns_error: false
  error_codes: []
  error_reference: ''
source:
  document: SINTRAN III Monitor Calls (ND-860228.2 EN)
  page: 221
  line: 9340
  scan_date: '2020'
  scanned_by: Jonny Oddene for Sintran Data
extraction:
  date: '2025-01-06'
  version: '1.0'
  validated: false
  ocr_corrected: true
  ocr_notes: Header missing octal - reconstructed
