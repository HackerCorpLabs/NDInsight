# SINTRAN III Monitor Call: ReadScratchFile
# Octal: 5B
# Extracted from: Monitor Calls.md (ND-860228.2 EN)

octal: 5B
name: ReadScratchFile
short_names:
- RDISK
description: Reads randomly from the scratch file. One block is transferred. There is one scratch file
  connected to each terminal. It is opened for random read and write access when you log in. Its file
  number is 100B.
notes:
- The standard block size is 512 bytes. You can change this with SetBlockSize. The first block is number
  0.
see_also:
- ReadBlock
- ReadFromFile. ReadFromFile is the most efficient monitor call
parameters:
- name: BlockNumber
  type: INTEGER
  io: I
  description: Block number to start reading from. First block is 0.
- name: DataDestination
  type: ARRAY
  io: O
  description: Buffer address for the transferred data (256 words / 512 bytes).
examples:
  pascal:
    available: true
    code: |-
      BlockNumber : INTEGER2;
      DataDestination : RECORD...END;
      ...
      ReadScratchFile(BlockNumber, DataDestination);
      IF ErrCode <> 0 THEN ...
  cobol:
    available: true
    code: |-
      01 BlockNumber COMP.
      01 DataDestination.
         02 array COMP OCCURS 256 TIMES.
      01 ErrCode COMP.
      ...
      MONITOR-CALL "ReadScratchFile" USING BlockNumber, DataDestination.
      CALL "CbError" USING ErrCode.
      IF ErrCode NOT = 0 GO ...
  fortran:
    available: true
    code: |-
      INTEGER BlockNumber
      INTEGER DataDestination(256)
      ...
      Monitor_Call('ReadScratchFile', BlockNumber, DataDestination(1))
      IF (ErrCode .NE. 0) THEN ...
  planc:
    available: true
    code: |-
      INTEGER : BlockNumber
      BYTES : DataDestination(0:511)
      ...
      ON ROUTINEERROR DO
          IF ErrCode > 0 THEN ...
      ENDON
      Monitor_Call('ReadScratchFile', BlockNumber, DataDestination(0))
  assembly_500:
    available: false
    code: ''
    octal_definition: ''
    notes: Not available
  mac:
    available: true
    code: |-
      | Instruction | Description                                  |
      |-------------|----------------------------------------------|
      | LDT BLKNO   | %Block number to be read.                    |
      | LDX (BUFF   | %Address of buffer to receive block read.    |
      | MON 5       | %Monitor call ReadScratchFile.               |
      | JMP ERROR   | %Error return from monitor call.             |
      | ...         | %Normal return.                              |
      | ERROR, ...  | %Error number in register A.                 |
      | BLKNO, ...  |                                              |
      | BUFF, 0     | `*+400/` %Make a buffer of 256 words, 1 block. |


      ND-100 | All users | Background programs
    mon_number: 5
compatibility:
  nd100: false
  nd500: false
  user_programs: true
  rt_programs: true
  system_programs: false
source:
  document: SINTRAN III Monitor Calls (ND-860228.2 EN)
  page: 403
  line: 18296
  scan_date: '2020'
  scanned_by: Jonny Oddene for Sintran Data
extraction:
  date: '2025-01-06'
  version: '1.0'
  validated: false
  ocr_corrected: false
