# SINTRAN III Monitor Call: GETSCRATCHSEGMENT
# Octal: 422B
# Extracted from: Monitor Calls.md (ND-860228.2 EN)

octal: 422B
name: GetScratchSegment
short_names:
- GSWSP
description: Connects an empty data segment to the user's domain and reserves space for it on the swap file. The segment is assigned the default name "SCRATCH-SEGMENT:DSEG".
notes: []
see_also:
- ClearCapability
parameters:
- name: SizeInBytes
  type: INTEGER
  io: I
  description: Segment size in bytes.
- name: LogSegmentNo
  type: INTEGER
  io: I
  description: Logical segment number to use. Use 0 for system to select first available free segment.
- name: RetLogSegmentNo
  type: INTEGER
  io: O
  description: Returns the logical segment number actually selected.
examples:
  pascal:
    available: true
    code: |-
      SizeInBytes, LogSegmentNo, RetLogSegmentNo : LONGINT;
      ...
      GetScratchSegment(SizeInBytes, LogSegmentNo, RetLogSegmentNo);
      IF ErrCode <> 0 THEN ...
  cobol:
    available: true
    code: |-
      01 SizeInBytes COMP.
      01 LogSegmentNo COMP.
      01 RetLogSegmentNo COMP.
      01 ErrCode COMP.
      ...
      MONITOR-CALL "GetScratchSegment" USING SizeInBytes, LogSegmentNo, RetLogSegmentNo.
      CALL "CbError" USING ErrCode.
      IF ErrCode NOT = 0 GO ...
  fortran:
    available: true
    code: |-
      INTEGER SizeInBytes, LogSegmentNo, RetLogSegmentNo
      ...
      Monitor_Call('GetScratchSegment', SizeInBytes, LogSegmentNo, RetLogSegmentNo)
      IF (ErrCode .NE. 0) THEN ...
  planc:
    available: true
    code: |-
      INTEGER : SizeInBytes, LogSegmentNo, RetLogSegNo
      ...
      ON ROUTINEERROR DO
          IF ErrCode >< 0 THEN ...
      ENDON
      Monitor_Call('GetScratchSegment', SizeInBytes, LogSegmentNo, RetLogSegNo)
  assembly_500:
    available: true
    code: |-
      SizeInBytes : W BLOCK 1
      LogSegmentNo : W BLOCK 1
      RetLogSegmentNo : W BLOCK 1
      ErrCode : W BLOCK 1
      GetScratchSegment : EQU 37B9 + 422B
      ...
      CALLG GetScratchSegment, 3, SizeInBytes, LogSegmentNo, RetLogSegmentNo
          IF K GO ERROR
      ...
      ERROR : W1 := ErrCode              %ErrorCode in W1 register.
    octal_definition: 37B9 + 422B
  mac:
    available: false
    code: ''
    mon_number: null
    notes: Not available.
compatibility:
  nd100: false
  nd500: false
  user_programs: true
  rt_programs: true
  system_programs: false
source:
  document: SINTRAN III Monitor Calls (ND-860228.2 EN)
  page: 0
  line: 12147
  scan_date: '2020'
  scanned_by: Jonny Oddene for Sintran Data
extraction:
  date: '2025-01-06'
  version: '1.0'
  validated: false
  ocr_corrected: false
