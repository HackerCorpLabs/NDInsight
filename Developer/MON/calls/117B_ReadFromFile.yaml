# SINTRAN III Monitor Call: ReadFromFile
# Octal: 117B
# Extracted from: Monitor Calls.md (ND-860228.2 EN)

octal: 117B
name: ReadFromFile
short_names:
- RFILE
description: ''
see_also:
- SetStartBlock
- SetBlockSize
- ReadDiskPage
- ReadBlock
- WriteBlock
- and WriteToFile
parameters:
- name: File number
  type: See Openfile.
  io: I
  description: ''
- name: Wait flag
  type: Use 0 to suspend the program until the transfer is completed. Other values make the program continue.
    You may check that the transfer is completed by AwaitFileTransfer.
  io: I
  description: ''
- name: Transferred data
  type: ''
  io: I
  description: ''
- name: Block number
  type: To start the read operation. Use -1 to read the next block.
  io: I
  description: ''
- name: Number of bytes
  type: To read.
  io: I
  description: ''
- name: Standard Error Code
  type: See appendix A.
  io: I
  description: ''
examples:
  pascal:
    available: true
    code: |-
      FileNo, WaitFlag, BlockNo : INTEGER2;
      Buff : ARRAY [0..15] OF RECORD...END;
      NoOfBytes : LONGINT;
      ...
      ReadFromFile(FileNo, WaitFlag, Buff, BlockNo, NoOfBytes);
      IF ErrCode <> 0 THEN ...
  cobol:
    available: true
    code: |-
      01 FileNo COMP.
      01 WaitFlag COMP.
      01 Buff.
         02 array COMP OCCURS 256 TIMES.
      01 BlockNo COMP.
      01 NoOfBytes COMP PIC S9(10).
      01 ErrCode COMP.
      ...
      MONITOR-CALL "ReadFromFile" USING FileNo, WaitFlag, Buff,
                                      BlockNo, NoOfBytes.

      CALL "CbError" USING ErrCode.
      IF ErrCode NOT = 0 GO ...
  fortran:
    available: true
    code: |-
      INTEGER FileNo, WaitFlag, BlockNo
      INTEGER Buff(256)
      INTEGER*4 NoOfBytes
      ...
      Monitor_Call('ReadFromFile', FileNo, WaitFlag, Buff(1),
                                     BlockNo, NoOfBytes)
      C  IF (ErrCode .NE. 0) THEN ...
  planc:
    available: true
    code: |-
      INTEGER : FileNo, RetFlag, BlockNo
      BYTES : Buff(0:511)
      INTEGER4 : NoOfBytes
      ...
      ON ROUTINEERROR DO
      &nbsp;&nbsp;&nbsp;&nbsp;IF ErrCode >< 0 THEN ...
      ENDON
      Monitor_Call('ReadfromFile', FileNo, RetFlag, Buff(0), BlockNo, NoOfBytes)
  assembly_500:
    available: true
    code: |-
      FileNo : W BLOCK 1
      WaitFlag : W BLOCK 1
      Buff : W BLOCK 256 %Must start on an even byte address.
      BlockNo : W BLOCK 1
      NoOfBytes : W BLOCK 1
      ErrCode : W BLOCK 1
      ReadFromFile : EQU 37B9 + 117B

      ...
      CALLG ReadfromFile, 5, FileNo, WaitFlag, Buff, BlockNo, NoOfBytes
      IF K GO ERROR
      ...
      ERROR : W1 =: ErrCode %ErrorCode in W1 register.
    octal_definition: 37B9 + 117B
  mac:
    available: true
    code: |-
      LDA (PAR %Load register A with address of parameter list.
      MON 117 %Monitor call ReadFromFile.
      JAF ERROR %Handle error if register A is non-zero.
      ...
      ERROR, ... %Error number in register A.
      ...
      PAR, FILNO %File number returned from earlier call to OpenFile.
      RETUR %Return flag.
      BUFF %Buffer to receive data.
      BLKNO %Block number in file where data starts.
      COUNT %Number of words to be read.
      ...
      FILNO, ...
      RETUR, 0
      BUFF, 0
      *+400/ %Make a buffer of 256 words.
      BLKNO, ...
      COUNT, ...


      | ND-100 and ND-500 | All users | All programs |
    mon_number: 117
compatibility:
  nd100: true
  nd500: true
  user_programs: true
  rt_programs: true
  system_programs: false
source:
  document: SINTRAN III Monitor Calls (ND-860228.2 EN)
  page: 399
  line: 18074
  scan_date: '2020'
  scanned_by: Jonny Oddene for Sintran Data
extraction:
  date: '2025-01-06'
  version: '1.0'
  validated: false
  ocr_corrected: false
