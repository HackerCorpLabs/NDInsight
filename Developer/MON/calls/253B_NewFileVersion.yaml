# SINTRAN III Monitor Call: NewFileVersion
# Octal: 253B
# Extracted from: Monitor Calls.md (ND-860228.2 EN)

octal: 253B
name: NewFileVersion
short_names:
- CRALN
description: |-
  Creates new versions of a file. You may create new versions for both indexed, contiguous and allocated files.

  - You must have directory access to the user area where you create the file. User SYSTEM and RT get the owners access rights.
  - The number following the semicolon in a file name is the version number. For example, TEST:SYMB:4 version 4 of the file.
  - The file must exist in advance.
  - Use DeleteFile to delete file versions.
see_also:
- CreateFile
- '@CREATE-NEW-VERSIONS'
- and @ALLOCATE-NEW-VERSIONS
parameters:
- name: Param1
  type: UNKNOWN
  io: I
  description: The file name including the version number. The version number defines the total number
    of versions. It includes the existing versions.
- name: Param2
  type: UNKNOWN
  io: I
  description: Start address of the first new version. Use 0 for contiguous and indexed files.
- name: Param3
  type: UNKNOWN
  io: I
  description: File size in pages. Use 0 for indexed files.
- name: Param4
  type: UNKNOWN
  io: I
  description: Standard Error Code. See appendix A.
examples:
  pascal:
    available: true
    code: |-
      FileName : PACKED ARRAY [0..63] OF CHAR;
      FirstPage, NoOfPages : LONGINT;
      ...
      NewFileVersion(FileName, FirstPage, NoOfPages);
      IF ErrCode <> 0 THEN ...
  cobol:
    available: true
    code: |-
      01 FileName       PIC X(64).
      01 FirstPage      COMP PIC S9(10).
      01 NoOfPages      COMP PIC S9(10).
      01 ErrCode        COMP.
      ...
      MONITOR-CALL "NewFileVersion" USING FileName, FirstPage, NoOfPages.
      CALL "CbError" USING ErrCode.
      IF ErrCode NOT = 0 GO ...
  fortran:
    available: true
    code: |-
      CHARACTER FileName*64
      INTEGER*4 FirstPage, NoOfPages
      ...
      Monitor_Call('NewFileVersion', FileName(1:64), FirstPage, NoOfPages)
      IF (ErrCode .NE. 0) THEN ...
  planc:
    available: true
    code: |-
      INTEGER4 : FirstPage, NoOfPages
      BYTES : FileName(0:63)
      ...
      ON ROUTINEERROR DO
         IF ErrCode > 0 THEN ...
      ENDON
      Monitor_Call('NewFileVersion', FileName, FirstPage, NoOfPages)
  assembly_500:
    available: true
    code: |-
      FileName : STRINGDATA 'EXAMPLE:SYMB;2'''  %Make a 2nd version of ...
      FirstPage : W BLOCK 1
      NoOfPages : W BLOCK 1
      ErrCode : W BLOCK 1                     % EXAMPLE:SYMB.
      NewFileVersion : EQU 37B9 + 253B
      ...
        CALLG NewFileVersion, 3, FileName, FirstPage, NoOfPages
        IF K GO ERROR
      ...
      ERROR : W1 =: ErrCode                %ErrorCode in W1 register.
    octal_definition: 37B9 + 253B
  mac:
    available: true
    code: |-
      LDX (FILE                       %Address of string containing file name.
      LDD PAGNO                       %Page number of first page.
      LDT (PAGES                      %Address of number of pages.
      MON 253                         %Monitor call NewFileVersion.
      JMP ERROR                       %Error return from monitor call.
      ...                             %Normal return.
      ERROR, ...                      %Error number in register A.

      FILE, 'EXAMPLE:SYMB;2'          %Create 2nd version of file EXAMPLE:SYMB
      PAGNO, ...                      %
      ...                             %A double word.
      PAGES, ...                      %
      ...                             %A double word.



      | ND-100 and ND-500 | All users | All programs |
    mon_number: 253
compatibility:
  nd100: true
  nd500: true
  user_programs: false
  rt_programs: false
  system_programs: false
source:
  document: SINTRAN III Monitor Calls (ND-860228.2 EN)
  page: 351
  line: 15777
  scan_date: '2020'
  scanned_by: Jonny Oddene for Sintran Data
extraction:
  date: '2025-01-06'
  version: '1.0'
  validated: false
  ocr_corrected: false
