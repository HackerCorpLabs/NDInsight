# SINTRAN III Monitor Call: INSTRING
# Octal: 161B
# Extracted from: Monitor Calls.md (ND-860228.2 EN)

octal: 161B
name: INSTRING
short_names: []
description: Reads a string of characters from a peripheral device, e.g. a terminal.
notes:
- Background programs wait if there are no characters in the device buffer. RT programs
  continue.
- All parameters are fetched and returned via the alternative page table.
- You are advised to use the faster InputString on the ND-500.
- Appendix F contains an ASCII table.
see_also:
- InputString
- In8AndFlag
- InUpTo8Bytes
- In8Bytes
- In4x2Bytes
- and OutString
references: []
parameters:
- name: DeviceNo
  type: Logical device number of a peripheral device. See appendix B.
  io: I
  description: ''
- name: TextRead
  type: String of characters.
  io: I
  description: ''
- name: NoOfBytes
  type: Maximum number of characters to be read.
  io: I
  description: ''
- name: Terminator
  type: Terminating character. Input stops when this character is read.
  io: I
  description: ''
- name: ReturnStatus
  type: A 16-bit integer status. Errors in parameters return -1. If bit 15:14 is 0,
    the maximum number of characters is read. If 1, a termination character is read.
    2 means not terminated. This applies only to RT program. 3 means device error.
    Bit 7:0 contains the error number. If bit 15:14 are 0, 1 or 2, the number of characters
    read is returned in bit 13:0.
  io: I
  description: ''
examples:
  pascal:
    available: true
    code: 'pascal

      DeviceNo, NoOfBytes, Terminator, ReturnStatus : INTEGER2;

      TextRead : PACKED ARRAY [0..255] OF CHAR;

      ...

      InString(DeviceNo, TextRead, NoOfBytes, Terminator, ReturnStatus);'
    notes: ''
  cobol:
    available: true
    code: "01 DeviceNo COMP.\n01 TextRead PIC X(256).\n01 NoOfBytes COMP.\n01 Terminator\
      \ COMP.\n01 ReturnStatus COMP.\n...\nMONITOR-CALL \"InString\" USING DeviceNo,\
      \ TextRead, NoOfBytes,\n                          Terminator, ReturnStatus."
    notes: ''
  fortran:
    available: true
    code: "fortran\nINTEGER DeviceNo, NoOfBytes, Terminator, ReturnStatus\nCHARACTER\
      \ TextRead*256\n...\nMonitor_Call('InString', DeviceNo, TextRead(1:256), NoOfBytes,\n\
      \ C                       Terminator, ReturnStatus)"
    notes: ''
  planc:
    available: true
    code: 'INTEGER : DeviceNo, NoOfBytes, Terminator, ReturnStatus

      BYTES : TextRead(0:255)


      Monitor_Call(‘InString’. DeviceNo, TextRead, NoOfBytes, &

      Terminator, ReturnStatus)'
    notes: ''
  assembly_500:
    available: true
    code: '| DeviceNo   | : W BLOCK 1     |

      |------------|-----------------|

      | TextRead   | : STRING 4000B  |

      | NoOfBytes  | : W BLOCK 1     |

      | Terminator | : W BLOCK 1     |

      | ReturnStatus | : W BLOCK 1   |

      | InString   | : EQU 37B9 + 161B |


      CALLG InString, 4, DeviceNo, TextRead, NoOfBytes, Terminator

      IF K GO Error

      W1 := ReturnStatus %Status is returned in W1 register.


      Error.'
    octal_definition: 37B9 + 161B
    notes: ''
  mac:
    available: true
    code: 'LDA (PAR  %Load register A with address of parameter list.

      MON 161  %Monitor call InString.

      STA STAT %Store status returned.


      | STAT. 0 |                       |

      |---------|-----------------------|

      | PAR,    | DEVNO %Logical device number |

      | TEXT    | %String read.         |

      | COUNT   | %Maximum number of characters to be read. |

      | TERM    | %Terminator character. |


      DEVNO,

      TEXT, 0 \

      **+50/ %Make a string of 80 characters.

      COUNT, 120 %To read maximum 80 characters.

      TERM, @'' %Terminate reading when @ is read.



      ND-100 and ND-500 All users All programs'
    mon_number: 161
    notes: ''
compatibility:
  platforms:
    nd100: false
    nd500: false
  users: []
  programs: []
  notes: ''
errors:
  returns_error: false
  error_codes: []
  error_reference: ''
source:
  document: SINTRAN III Monitor Calls (ND-860228.2 EN)
  page: 323
  line: 14575
  scan_date: '2020'
  scanned_by: Jonny Oddene for Sintran Data
extraction:
  date: '2025-01-06'
  version: '1.0'
  validated: false
  ocr_corrected: false
  ocr_notes: ''
