# SINTRAN III Monitor Call: GetFileIndexes
# Octal: 274B
# Extracted from: Monitor Calls.md (ND-860228.2 EN)

octal: 274B
name: GetFileIndexes
short_names:
- FOBJN
description: ''
see_also:
- GetAllFileIndexes
- GetDirUserIndexes
- GetDirNameIndex
- GetDirEntry
- GetUserEntry
- GetObjectEntry
- and GetDefaultDir
parameters:
- name: File name
  type: Abbreviated file names are less efficient.
  io: I
  description: ''
- name: File type
  type: Not used on the ND-100. Do not include the colon.
  io: I
  description: ''
- name: Directory index
  type: '-'
  io: I
  description: ''
- name: User index
  type: '-'
  io: I
  description: ''
- name: Object index
  type: '-'
  io: I
  description: ''
- name: Object index of the next file version
  type: Equal to object index if no more versions exist.
  io: I
  description: ''
- name: Standard Error Code
  type: See appendix A.
  io: I
  description: ''
examples:
  pascal:
    available: true
    code: |-
      FileName : PACKED ARRAY [0..63] OF CHAR;
      FileType : PACKED ARRAY [0..3] OF CHAR;
      DirIndex, UserIndex, ObjectIndex, NextObjectIndex : INTEGER2;
      ...
      FindFileIndexes(FileName, FileType, DirIndex, UserIndex,
        ObjectIndex, NextObjectIndex); [Note routine name.]

      IF ErrCode <> 0 THEN ...
  cobol:
    available: true
    code: |-
      01 FileName PIC X(64).
      01 FileType PIC X(4).
      01 DirIndex COMP.
      01 UserIndex COMP.
      01 ObjectIndex COMP.
      01 NextObjectIndex COMP.
      01 ErrCode COMP.
      ...
      MONITOR-CALL "GetfileIndexes" USING FileName, FileType, DirIndex,
        UserIndex, ObjectIndex, NextObjectIndex.
      CALL "CbError" USING ErrCode.
      IF ErrCode NOT = 0 GO ...
  fortran:
    available: true
    code: |-
      CHARACTER  FileName*64, FileType*4
      INTEGER DirIndex, UserIndex, ObjectIndex, NextObjectIndex
      ...
      Monitor_Call('GetFileIndexes', FileName(1:64), FileType(1:4),
       C      DirIndex, UserIndex, ObjectIndex, NextObjectIndex)
      IF (ErrCode .NE. 0) THEN ...
  planc:
    available: true
    code: |-
      BYTES : FileName(0:63), FileType(0:3)
      INTEGER : DirIndex, UserIndex, ObjectIndex, NextObjectIndex
      ...
      ON ROUTINEERROR DO
        IF ErrCode >< 0 THEN ...
      ENDON
      Monitor_Call('GetFileIndexes', FileName, FileType, DirIndex, &
                   UserIndex, ObjectIndex, NextObjectIndex)
  assembly_500:
    available: true
    code: |-
      FileName : STRING 64
      FileType : STRING 4
      DirIndex : W BLOCK 1
      UserIndex : W BLOCK 1
      ObjectIndex : W BLOCK 1
      NextObjectIndex : W BLOCK 1
      ErrCode : W BLOCK 1
      GetFileIndexes : EQU 37B9 + 274B
      ...
        CALLG GetFileIndexes, 6, FileName, FileType, DirIndex, &
              UserIndex, ObjectIndex, NextObjectIndex
        IF K GO ERROR
      ...

      ERROR : W1 =: ErrCode                     %ErrorCode in W1 register.
    octal_definition: 37B9 + 274B
  mac:
    available: true
    code: |-
      LDX  (FILE            %Address of file name string.
      MON  274              %Monitor call GetFileIndexes.
      JMP  ERROR            %Error return from monitor call.
      STT  INDEX            %Normal return, store obtained indexes.
      STA  OBJIX            %Store object index.
      COPY SD DA
      STA  NEXTO            %Store object index of next version.
      ...
      ERROR, ...            %Error number in register A.

      FILE,   'EXAMPLE:SYMB' %Obtain object index of file EXAMPLE:SYMB.
      INDEX,  0             %Directory index in left byte. User index right.
      OBJIX,  0
      NEXTO,  0



      ND-100 and ND-500 | All users | All programs
      --- | --- | ---
    mon_number: 274
compatibility:
  nd100: false
  nd500: false
  user_programs: true
  rt_programs: true
  system_programs: false
source:
  document: SINTRAN III Monitor Calls (ND-860228.2 EN)
  page: 247
  line: 10835
  scan_date: '2020'
  scanned_by: Jonny Oddene for Sintran Data
extraction:
  date: '2025-01-06'
  version: '1.0'
  validated: false
  ocr_corrected: false
