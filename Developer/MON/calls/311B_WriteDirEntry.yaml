# SINTRAN III Monitor Call: WriteDirEntry
# Octal: 311B
# Extracted from: Monitor Calls.md (ND-860228.2 EN)

octal: 311B
name: WriteDirEntry
short_names:
- WDIEN
description: |-
  Changes the information about a directory. The complete contents of the directory entry is set. The SINTRAN III System Supervisor (ND-830003) describes the file system in more detail.

  - The directory must be entered.
  - The directory must be reserved.
see_also:
- GetDirUserIndexes
- and GetDirEntry
parameters:
- name: DirIndex
  type: INTEGER
  io: I
  description: The directory index. See GetDirUserIndexes.
- name: DirEntry
  type: ARRAY
  io: I
  description: The 48 byte directory entry. See Appendix C.
examples:
  pascal:
    available: true
    code: |-
      DirIndex : INTEGER2;
      DirEntry : ARRAY [0..1] OF RECORD...END;
      ...
      SetDirEntry(DirIndex, DirEntry);    [Note routine name.]
      IF ErrCode <> 0 THEN ...
  cobol:
    available: true
    code: |-
      01 DirIndex COMP.
      01 DirEntry.
         02 array COMP OCCURS 24 TIMES.
      01 ErrCode COMP.
      ...
      MONITOR-CALL "WriteDirEntry" USING DirIndex, DirEntry.
      CALL "CbError" USING ErrCode.
      IF ErrCode NOT = 0 GO ...
  fortran:
    available: true
    code: |-
      INTEGER DirIndex
      INTEGER DirEntry(24)
      ...
      Monitor_Call('WriteDirEntry', DirIndex, DirEntry(1))
      IF (ErrCode .NE. 0) THEN ...
  planc:
    available: true
    code: |-
      INTEGER : DirIndex
      BYTES : DirEntry(0:47)
      ...
      ON ROUTINEERROR DO
          IF ErrCode > 0 THEN ...
      ENDON
      Monitor_Call('WriteDirEntry', DirIndex, DirEntry(0))
  assembly_500:
    available: true
    code: |-
      DirIndex : W BLOCK 1
      DirEntry : W ARRAY 24
      ErrCode : W BLOCK 1
      WriteDirEntry : EQU 37B9 + 311B
      ...
      CALLG WriteDirEntry, 2, DirIndex, DirEntry
      IF K GO ERROR
      ...
      ERROR : W1 =: ErrCode              %ErrorCode in W1 register.
    octal_definition: 37B9 + 311B
  mac:
    available: true
    code: |-
      LDT DIRIX     %Directory index.
      LDX (ENTRY)   %Address of buffer containing directory entry.
      MON 311       %Monitor call WriteDirEntry.
      JMP ERROR     %Error return from monitor call.
      ...           %Normal return.
      ERROR, ...    %Error number in register A.
      ...
      DIRIX, ...
      ENTRY, ...    %
      ...           %A buffer of 24 words.



      | ND-100 and ND-500 | User SYSTEM | All programs |
    mon_number: 311
compatibility:
  nd100: true
  nd500: true
  user_programs: false
  rt_programs: false
  system_programs: false
source:
  document: SINTRAN III Monitor Calls (ND-860228.2 EN)
  page: 563
  line: 25808
  scan_date: '2020'
  scanned_by: Jonny Oddene for Sintran Data
extraction:
  date: '2025-01-06'
  version: '1.0'
  validated: false
  ocr_corrected: false
