# SINTRAN III Monitor Call: GetDefaultDir
# Octal: 250B
# Extracted from: Monitor Calls.md (ND-860228.2 EN)

octal: 250B
name: GetDefaultDir
short_names:
- FDFDI
description: |-
  Gets the userâ€™s default directory. The directory index and the user index are returned.

  - Use ExecutionInfo to get the user index and the directory index of the user executing the program.
see_also:
- GetDirUserIndexes
- GetDirNameIndex
- GetFileIndexes
- GetDirEntry
- GetUserEntry
- GetObjectEntry
- and GetAllFileIndexes
parameters:
- name: UserName
  type: STRING
  io: I
  description: User name string (16 chars). May identify remote user.
- name: DirectoryIndex
  type: INTEGER
  io: O
  description: Directory index.
- name: UserIndex
  type: INTEGER
  io: O
  description: User index in the directory.
examples:
  pascal:
    available: true
    code: |-
      DirectoryIndex, UserIndex : INTEGER2;
      UserName : PACKED ARRAY [0..15] OF CHAR;
      ...
      GetDefaultDir(UserName, DirectoryIndex, UserIndex);
      IF ErrCode <> 0 THEN ...
  cobol:
    available: true
    code: |-
      01 DirectoryIndex COMP.
      01 UserIndex COMP.
      01 UserName PIC X(16).
      01 ErrCode COMP.
      ...
      MONITOR-CALL "GetDefaultDir" USING UserName, DirectoryIndex, UserIndex.
      CALL "CbError" USING ErrCode.
      IF ErrCode NOT = 0 GO ...
  fortran:
    available: true
    code: |-
      INTEGER DirIndex, UserIndex
      CHARACTER UserName*16
      ...
      Monitor_Call('GetDefaultDir', UserName(1:16), DirIndex, UserIndex)
      IF (ErrCode .NE. 0) THEN ...
  planc:
    available: true
    code: |-
      INTEGER : DirectoryIndex, UserIndex
      BYTES : UserName(0:15)
      ...

      ON ROUTINEERROR DO
        IF ErrCode >0 THEN ...
      ENDON

      Monitor_Call('GetDefaultDir', UserName, DirectoryIndex, UserIndex)
  assembly_500:
    available: true
    code: |-
      DirectoryIndex : W BLOCK 1
      UserIndex : W BLOCK 1
      UserName : STRINGDATA 'A-HANSEN'''
      ErrCode : W BLOCK 1
      GetDefaultDir : EQU 37B9 + 250B
      ...

      CALLG GetDefaultDir, 3, UserName, DirectoryIndex, UserIndex
      IF K GO ERROR
      ...

      ERROR : W1 =: ErrCode    %ErrorCode in W1 register.
    octal_definition: 37B9 + 250B
  mac:
    available: true
    code: |-
      LDX (USER      %Address of string containing user name.
      MON 250        %Monitor call GetDefaultDir.
      JMP ERROR      %Error return from monitor call.
      STT DIRIX      %Normal return, store directory index.
      STX USRIX      %Store user index in default directory.
      ...

      ERROR, ...     %Error number in register A.
      ...

      USER, 'A-HANSEN'   %To find default directory of user A-HANSEN.
      DIRIX, 0
      USRIX, 0


      | ND-100 and ND-500 | All users | All programs |
    mon_number: 250
compatibility:
  nd100: true
  nd500: true
  user_programs: false
  rt_programs: false
  system_programs: false
source:
  document: SINTRAN III Monitor Calls (ND-860228.2 EN)
  page: 229
  line: 9871
  scan_date: '2020'
  scanned_by: Jonny Oddene for Sintran Data
extraction:
  date: '2025-01-06'
  version: '1.0'
  validated: false
  ocr_corrected: false
