# SINTRAN III Monitor Call: GetDirEntry
# Octal: 244B
# Extracted from: Monitor Calls.md (ND-860228.2 EN)

octal: 244B
name: GetDirEntry
short_names:
- GDIEN
description: ''
see_also:
- GetDirUserIndexes
- WriteDirEntry
- GetUserEntry
- and GetObjectEntry
parameters:
- name: Param1
  type: UNKNOWN
  io: I
  description: The directory index. See GetDirUserIndexes.
- name: Param2
  type: UNKNOWN
  io: I
  description: The 42-byte directory entry. See appendix C.
- name: Param3
  type: UNKNOWN
  io: I
  description: Flag indicating whether or not the disk has spare-track allocation.
- name: Param4
  type: UNKNOWN
  io: I
  description: Remote flag. Use 0 for the local computer and 1 for a remote computer.
- name: Param5
  type: UNKNOWN
  io: I
  description: Remote system identification if remote flag is 1.
- name: Param6
  type: UNKNOWN
  io: I
  description: Standard Error Code. See appendix A.
examples:
  pascal:
    available: true
    code: |-
      DirectoryIndex, Flag : INTEGER2;
      DirEntry : ARRAY [0..1] OF RECORD...END;
      ...
      GetDirEntry(DirectoryIndex, DirEntry, Flag);
      IF ErrCode <> 0 THEN ...
  cobol:
    available: true
    code: |-
      01 DirectoryIndex COMP.
      01 Flag COMP.
      01 DirEntry.
         02 array COMP OCCURS 24 TIMES.
      01 RemoteFlag COMP.
      01 RemoteSystem PIC X(64).
      01 ErrCode COMP.
      ...
      MONITOR-CALL "GetDirEntry" USING DirectoryIndex, DirEntry, Flag,
                                       RemoteFlag, RemoteSystem)
      CALL "CbError" USING ErrCode.
      IF ErrCode NOT = 0 GO ...
  fortran:
    available: true
    code: |-
      INTEGER DirectoryIndex, Flag, RemoteFlag
      CHARACTER RemoteSystem*64
      INTEGER DirEntry(24)
      ...
      Monitor_Call('GetDirEntry', DirectoryIndex, DirEntry(1), Flag,
                   RemoteFlag, RemoteSystem(1:16))
      C    IF (ErrCode .NE. 0) THEN ...
  planc:
    available: true
    code: |-
      INTEGER : DirectoryIndex, Flag, RemoteFlag
      BYTES : DirEntry(0:47)
      BYTES : RemoteSystem(0:63)
      ...
      ON ROUTINEERROR DO
          IF ErrCode > 0 THEN ...
      ENDON
      Monitor_Call('GetDirEntry', DirectoryIndex, DirEntry(0), Flag, RemoteFlag, &
      RemoteSystem)
  assembly_500:
    available: true
    code: |-
      DirectoryIndex : W BLOCK 1    %Bit 7 set if SysId is supplied.
      Flag : W BLOCK 1
      DirEntry : W ARRAY 25B
      SysId : STRING 16  %Remote system name as an optional 4th parameter.
      ErrCode : W BLOCK 1
      GetDirEntry : EQU 37B9 + 244B
      ...
      CALLG GetDirEntry, 3, DirectoryIndex, DirEntry, Flag
      IF K GO ERROR
      ...
      ERROR : W1 =: ErrCode         %ErrorCode in W1 register.
    octal_definition: 37B9 + 244B
  mac:
    available: true
    code: |-
      LDT DIRIX        %Directory index.
      LDX (BUFF       %Buffer to receive directory entry.
      LDA (REMID      %Remote system identification in D register.
      COPY SA DD      %Used only if bit 15 in X register is set.
      MON 244         %Monitor call GetDirEntry.
      JMP ERROR       %Error return from monitor call.
      ...
                      %Normal return.
                      %A-reg.=1 or 5 : disk has spare-track allocation.
                      %A-reg.=3 : no spare-track allocation.
      ERROR, ...      %Error number in register A.
      ...
      DIRIX, ...      %Set bit 15 if remote system.
      BUFF, 0         %
      *+30/           %24 word long buffer.
      REMID, 0        %Remote identification string.
      *+40/           %32 words for string.



      | ND-100 and ND-500 | User RT and user SYSTEM | All programs |
    mon_number: 244
compatibility:
  nd100: true
  nd500: true
  user_programs: true
  rt_programs: true
  system_programs: false
source:
  document: SINTRAN III Monitor Calls (ND-860228.2 EN)
  page: 233
  line: 10118
  scan_date: '2020'
  scanned_by: Jonny Oddene for Sintran Data
extraction:
  date: '2025-01-06'
  version: '1.0'
  validated: false
  ocr_corrected: false
