# SINTRAN III Monitor Call: OpenFile
# Octal: 50B
# Extracted from: Monitor Calls.md (ND-860228.2 EN)

octal: 50B
name: OpenFile
short_names:
- OPEN
description: Opens a file. You cannot access a file before you open it. Specify what kind of access you
  want, e.g. sequential write or random read.
notes:
- CloseFile closes the file.
- Opened files are closed when a program terminates.
- You may have a maximum of 18 files opened at a time.
- Files are protected from access by unauthorized users. Use @FILE-STATISTICS to list the file access.
- ND-500 has its own file numbers which may differ from the SINTRAN III file numbers.
see_also:
- ScratchOpen
- SetPermanentOpen
- DirectOpen
- and @OPEN-FILE
parameters:
- name: FileNo
  type: INTEGER
  io: IO
  description: If 0 on input, returns the ND-500 open file number. Otherwise specifies the file number to use.
- name: AccessCode
  type: INTEGER
  io: I
  description: |-
    Access code specifying type of file access:
    0 = Sequential write
    1 = Sequential read
    2 = Random read or write
    3 = Random read only
    4 = Sequential read or write
    5 = Sequential write append
    6 = Random read or write common on contiguous files
    7 = Random read common on contiguous files
    8 = Random read or write on contiguous files (direct transfer for RT programs)
    9 = Random read, write append for WriteToFile
- name: FileName
  type: STRING
  io: I
  description: File name string (up to 64 characters). If empty, name is read from terminal.
- name: FileType
  type: STRING
  io: I
  description: Default file type string (up to 4 characters), e.g. 'SYMB'.
examples:
  pascal:
    available: true
    code: |-
      FileNo, AccessCode : INTEGER;
      FileName : PACKED ARRAY [0..63] OF CHAR;
      FileType : PACKED ARRAY [0..3] OF CHAR;
      ...
      OpenFile(FileNo, AccessCode, FileName, FileType);
      IF ErrCode <> 0 THEN ...
  cobol:
    available: true
    code: |-
      01 FileNo COMP.
      01 AccessCode COMP.
      01 FileName PIC X(64).
      01 FileType PIC X(4).
      01 ErrCode COMP.
      MOVE 0 TO FileNo.
      MONITOR-CALL "OpenFile" USING FileNo, AccessCode, FileName, FileType.
      CALL "CbError" USING ErrCode.
      IF ErrCode NOT = 0 GO ...
  fortran:
    available: true
    code: |-
      INTEGER FileNo, AccessCode
      CHARACTER FileName*64, FileType*4
  planc:
    available: true
    code: |-
      plaintext
      INTEGER : FileNo, AccessCode
      BYTES : FileName(0:63), FileType(0:3)
      ...
      ON ROUTINEERROR DO
         IF ErrCode > 0 THEN ...
      ENDON

      0 =: FileNo
      Monitor_Call('OpenFile', FileNo, AccessCode, FileName, FileType)
  assembly_500:
    available: true
    code: |-
      | Variable   | Type      | Description                                                |
      |------------|-----------|------------------------------------------------------------|
      | FileNo     | W BLOCK 1 | %Returned ND-500 open file number if 0 on input.           |
      | S3No       | W BLOCK 1 | %SINTRAN III open file number as optional parameter.       |
      | AccessCode | W BLOCK 1 |                                                           |
      | FileName   | STRINGDATA| 'EXAMPLE'                                                  |
      | FileType   | STRINGDATA| 'SYMB'                                                     |
      | ErrCode    | W BLOCK 1 |                                                           |
      | OpenFile   | EQU 37B9 + 50B |                                                      |

      plaintext
      ...
      CALLG OpenFile, 4, FileNo, AccessCode, FileName, FileType
      IF K GO ERROR
      ...
      ERROR = W1 =: ErrCode %ErrorCode in W1 register.
    octal_definition: 37B9 + 50B
  mac:
    available: true
    code: |-
      plaintext
      LDX (FILE %If 0, the name is read from the terminal.
      LDA (TYPE %Address of default file type string.
      LDT ACCES %Access code.
      MON 50 %Monitor call OpenFile.
      JMP ERROR %Error return from monitor call.
      STA FILNO %Normal return, store the file number returned.
      ...
      ERROR, ... %Error number in register A.
      FILNO, 0
      ACCES, ...
      FILE, 'EXAMPLE' %Open EXAMPLE:SYMB
      TYPE, 'SYMB' %



      ND-100 and ND-500 | All users | All programs
      ---|---|---
    mon_number: 50
compatibility:
  nd100: true
  nd500: true
  user_programs: false
  rt_programs: false
  system_programs: false
source:
  document: SINTRAN III Monitor Calls (ND-860228.2 EN)
  page: 369
  line: 16558
  scan_date: '2020'
  scanned_by: Jonny Oddene for Sintran Data
extraction:
  date: '2025-01-06'
  version: '1.0'
  validated: false
  ocr_corrected: false
