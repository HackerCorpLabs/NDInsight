# SINTRAN III Monitor Call: GetUserName
# Octal: 214B
# Extracted from: Monitor Calls.md (ND-860228.2 EN)

octal: 214B
name: GetUserName
short_names:
- GUSNA
description: ''
see_also:
- GetUserEntry
- ExecutionInfo
parameters: []
examples:
  pascal:
    available: true
    code: |-
      DirectoryIndex, UserIndex : INTEGER2;
      UserName : PACKED ARRAY [0..15] OF CHAR;
      ...
      FindUserName(UserName, DirectoryIndex, UserIndex); [Note routine name.]
      IF ErrCode <> 0 THEN ...
  cobol:
    available: true
    code: |-
      01 DirectoryIndex COMP.
      01 UserIndex COMP.
      01 UserName PIC X(16).
      01 RemoteFlag COMP.
      01 RemoteSystem PIC X(64).
      01 ErrCode COMP.
      ...
      MONITOR-CALL "GetUserName" USING UserName, DirectoryIndex, UserIndex,
                    RemoteFlag, RemoteSystem.
      CALL "CbError" USING ErrCode.
      IF ErrCode NOT = 0 GO ...
  fortran:
    available: true
    code: |-
      INTEGER DirIndex, UserIndex, RemoteFlag
      CHARACTER UserName*16, RemoteSystem*64
      ...
      Monitor_Call('GetUserName', UserName(1:16), DirIndex, UserIndex,
                   RemoteFlag, RemoteSystem(1:64))
      IF (ErrCode .NE. 0) THEN ...
  planc:
    available: true
    code: |-
      INTEGER : DirectoryIndex, UserIndex, RemoteFlag
      BYTES : UserName(0:15), RemoteSystem(0:63)
      ...
      ON ROUTINEERROR DO
        IF ErrCode >< 0 THEN ...
      ENDON
      Monitor_Call('GetUserName', UserName, DirectoryIndex, UserIndex,&
        RemoteFlag, RemoteSystem)
  assembly_500:
    available: true
    code: |-
      DirectoryIndex : W BLOCK 1
      UserIndex : W BLOCK 1
      UserName : STRING 16
      SysId : STRING 16   %Optional parameter for remote system.
      ErrCode : W BLOCK 1
      GetUserName : EQU 37B9 + 214B
      ...
      CALLG GetUserName, 3, UserName, DirectoryIndex, UserIndex
        IF K GO ERROR
      ...
      ERROR : W1 =: ErrCode  %ErrorCode in W1 register.
    octal_definition: 37B9 + 214B
  mac:
    available: true
    code: |-
      LDA (USER           %Address of string to receive user name.
      LDX INDEX           %Left byte: Dir index. Right byte: User index.
      LDT (REMID          %Remote identification if bit 15 in register X.
      MON 214             %Monitor call GetUserName.
      JMP ERROR           %Error return from monitor call.
      ...                 %Normal return.
      ERROR, ...          %Error number in register A.
      ...

      USER, 0             %A string of 16 characters.
      *+10/
      INDEX, ...          %Set bit 15 if remote user.
      REMID, 0            %Remote system identification string.
      *+32/


      | ND-100 and ND-500 | All users | All programs |
    mon_number: 214
compatibility:
  nd100: true
  nd500: true
  user_programs: true
  rt_programs: true
  system_programs: false
source:
  document: SINTRAN III Monitor Calls (ND-860228.2 EN)
  page: 299
  line: 13307
  scan_date: '2020'
  scanned_by: Jonny Oddene for Sintran Data
extraction:
  date: '2025-01-06'
  version: '1.0'
  validated: false
  ocr_corrected: false
