# SINTRAN III Monitor Call: GetFileName
# Octal: 273B
# Extracted from: Monitor Calls.md (ND-860228.2 EN)

octal: 273B
name: GetFileName
short_names:
- MGFIL
description: |-
  Gets the name of a file. You specify the directory index, the user index, and the object index. The file name, the file type, and the version are returned.

  - The file need not be open.
  - On the ND-100 you may specify a file on a remote computer system. The computers must be connected through a COSMOS network.
see_also:
- FullFileName
parameters:
- name: DirIndex
  type: INTEGER
  io: I
  description: Directory index.
- name: UserIndex
  type: INTEGER
  io: I
  description: User index.
- name: ObjectIndex
  type: INTEGER
  io: I
  description: Object index.
- name: FileName
  type: STRING
  io: O
  description: File name (64 chars).
- name: RemoteFlag
  type: INTEGER
  io: I
  description: 0 for local file, 1 for remote file.
- name: RemoteSystem
  type: STRING
  io: IO
  description: Remote system identification if remote flag is 1 (64 chars). Not returned by ND-500.
examples:
  pascal:
    available: true
    code: |-
      DirIndex, UserIndex, ObjectIndex : INTEGER2;
      FileName : PACKED ARRAY [0..63] OF CHAR;
      ...
      GetFileName(DirIndex, UserIndex, ObjectIndex, FileName);
      IF ErrCode <> 0 THEN ...
  cobol:
    available: true
    code: |-
      01 DirIndex COMP.
      01 UserIndex COMP.
      01 ObjectIndex COMP.
      01 FileName PIC X(64).
      01 RemoteFlag COMP.
      01 RemoteSystem PIC X(64).
      01 ErrCode COMP.
      ...
      MONITOR-CALL "GetFileName" USING DirIndex, UserIndex, ObjectIndex,
                      FileName, RemoteFlag, RemoteSystem.
      CALL "CbError" USING ErrCode.
      IF ErrCode NOT = 0 GO ...
  fortran:
    available: true
    code: |-
      INTEGER DirIndex, UserIndex, ObjIndex, RemoteFlag
      CHARACTER FileName*64, RemoteSystem*64
      ...
      Monitor_Call('GetFileName', DirIndex, UserIndex, ObjIndex,
                    FileName(1:64), RemoteFlag, RemoteSystem(1:64))
      IF (ErrCode .NE. 0) THEN ...
  planc:
    available: true
    code: |-
      INTEGER : DirIndex, UserIndex, ObjectIndex, RemoteFlag
      BYTES : FileName(0:63), RemoteSystem(0:63)
      ...
      ON ROUTINEERROR DO
      &nbsp;&nbsp;&nbsp;&nbsp;IF ErrCode > 0 THEN ...
      ENDON
      Monitor_Call('GetFileName', DirIndex, UserIndex, ObjectIndex, FileName,&
      &nbsp;&nbsp;&nbsp;&nbsp;RemoteFlag, RemoteSystem)
  assembly_500:
    available: true
    code: |-
      DirIndex : W BLOCK 1
      UserIndex : W BLOCK 1
      ObjectIndex : W BLOCK 1
      FileName : STRING 64
      SysId : STRING 20 %Optional parameter if bit 7 in DirIndex is set.
      ErrCode : W BLOCK 1
      GetFileName : EQU 37B9 + 273B
      ...
      CALLG GetFileName, 4, DirIndex, UserIndex, ObjectIndex, FileName
      IF K GO ERROR
      ...
      ERROR : W1 =: ErrCode %ErrorCode in W1 register.
    octal_definition: 37B9 + 273B
  mac:
    available: true
    code: |-
      LDT INDEX %Left byte: dir index. Right byte: user index.
      LDA (REMID) %Remote system identification in register D.
      COPY SA DD %Used only if bit 15 in register A is set.
      LDA OBJIX %Object index.
      LDX (BUFF) %Address of buffer to receive file name.
      MON 273 %Monitor call GetFileName.
      JMP ERROR %Error return from monitor call.
      ...  %Normal return.
      ERROR, ... %Error number in register A.

      INDEX, ... %Set bit 15 if remote file.
      OBJIX, ...
      BUFF, 0 %
      *+32/ %Make a buffer big enough to receive file name.
      REMID, 0 %Remote identification string.
      *+40/  %32 words for string.


      ND-100 and ND-500 | All users | All programs
      ---|---|---
    mon_number: 273
compatibility:
  nd100: false
  nd500: false
  user_programs: true
  rt_programs: true
  system_programs: false
source:
  document: SINTRAN III Monitor Calls (ND-860228.2 EN)
  page: 249
  line: 10966
  scan_date: '2020'
  scanned_by: Jonny Oddene for Sintran Data
extraction:
  date: '2025-01-06'
  version: '1.0'
  validated: false
  ocr_corrected: false
