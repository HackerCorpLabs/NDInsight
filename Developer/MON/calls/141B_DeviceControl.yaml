# SINTRAN III Monitor Call: DeviceControl
# Octal: 141B
# Extracted from: Monitor Calls.md (ND-860228.2 EN)

octal: 141B
name: DeviceControl
short_names:
- IOSET
description: |-
  Sets control information for a character device, e.g. a terminal or a printer. The control information depends on the device.

  - The device must be reserved. See ReserveResource.
see_also:
- DeviceFunction
- '@IOSET'
parameters:
- name: Param1
  type: UNKNOWN
  io: I
  description: Logical device number. See appendix B. You cannot use 1 for your own terminal. Use ExecutionInfo
    to get its logical device number instead. File numbers are illegal.
- name: Param2
  type: UNKNOWN
  io: I
  description: Input or output part of the device. Use 0 for input and 1 for output.
- name: Param3
  type: UNKNOWN
  io: I
  description: Address of RT description of reserving program. Use 0 for the calling program.
- name: Param4
  type: UNKNOWN
  io: I
  description: Control flag. Use -2 to empty the TAD output buffer. Use -1 to reset the device. This sets
    card readers in ASCII mode. 0 sets ASCII mode without resetting the device. 1 sets binary mode. InByte
    will then return a 12-bit card column image.
- name: Param5
  type: UNKNOWN
  io: I
  description: Return status. 0 means no errors. An illegal RT description address returns -1.
examples:
  pascal:
    available: true
    code: |-
      DeviceNo, IOFlag, RTProgram, CtrlFlag, Status : INTEGER2;
      ...
      DeviceControl(DeviceNo, IOFlag, RTProgram, CtrlFlag, Status);
  cobol:
    available: true
    code: |-
      01 DevNo       COMP.
      01 IOFlag      COMP.
      01 RTProgram   COMP.
      01 CtrlFlag    COMP.
      01 ReturnStatus COMP.
      ...
      MONITOR-CALL "DeviceControl" USING DevNo, IOFlag, RTProgram, CtrlFlag,
                                       ReturnStatus.
  fortran:
    available: true
    code: |-
      INTEGER DeviceNo, IOFlag, RTProgram, CtrlFlag, ReturnStatus
      ...
      Monitor_Call('DeviceControl', DeviceNo, IOFlag, RTProgram,
                   CtrlFlag, ReturnStatus)
  planc:
    available: true
    code: |-
      INTEGER : DeviceNo, IOFlag, RTProgram, CtrlFlag, ReturnStatus
      ...
      Monitor_Call('DeviceControl', DeviceNo, IOFlag, RTProgram, CtrlFlag, ReturnStatus)
  assembly_500:
    available: true
    code: |-
      DeviceNo : W BLOCK 1
      IOFlag : W BLOCK 1
      RTProgram : W BLOCK 1
      CtrlFlag : W BLOCK 1
      ReturnStatus : W BLOCK 1
      DeviceControl : EQU 37B9 + 141B
      ...
      CALLG DeviceControl, 4, DeviceNo, IOFlag, RTProgram, CtrlFlag
      W1 =: ReturnStatus %Status is returned in W1 register.
    octal_definition: 37B9 + 141B
  mac:
    available: true
    code: |-
      LDA (PAR %Load register A with address of parameter list.
      MON 141 %Monitor call DeviceControl.
      JAN ERROR %Error if register A is negative.
      ...
      ERROR, ... %Handle the error.
      ...
      PAR, DEVNO %Logical device number.
      IOF %Input or Output flag.
      PROG %RealTime (program) description.
      CTRL %Control flag.
      ...
      DEVNO, ...
      IOF, ...
      PROG, ...
      CTRL, ...

      | ND-100 and ND-500 | All users | All programs |
    mon_number: 141
compatibility:
  nd100: true
  nd500: true
  user_programs: true
  rt_programs: true
  system_programs: false
source:
  document: SINTRAN III Monitor Calls (ND-860228.2 EN)
  page: 141
  line: 6111
  scan_date: '2020'
  scanned_by: Jonny Oddene for Sintran Data
extraction:
  date: '2025-01-06'
  version: '1.0'
  validated: false
  ocr_corrected: false
